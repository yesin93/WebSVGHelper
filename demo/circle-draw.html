<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Circle draw</title>
    <link href="../css/shapesJS.css" rel="stylesheet" type="text/css"/>
    <script src="../libs/d3/d3.min.js"></script>
</head>
<body>

<div id="circle-container">
    <svg id="circle-svg" width="600" height="500"></svg>
</div>
<script>

    //properties for circle drawing
    var point1 = [];
    var point2 = [];
    var svgCanvas = d3.select("#circle-svg");
    var circle;

    svgCanvas.call(d3.drag().on("start", initialPlod)
        .on("drag", dragDraw)
        .on("end", stopRendering));

//    svgCanvas.on("mousedown", sizeCircle);

    function getRadius(cX, cY, perimeterX, perimeterY){
        /**
         * using circle equation
         *
         * r2 = (x2 - x1)^2 + (y2 - y1)^2
         */
       return Math.sqrt(Math.pow((perimeterX - cX), 2) + Math.pow((perimeterY - cY),2));
    }

    //initial marking of the circle on the canvas
    function initialPlod(){
        point1 = d3.mouse(this);
        circle = svgCanvas.append("circle")
            .attr("cx", point1[0])
            .attr("cy", point1[1])
            .attr("r", 0);
    }

    //drag point to adjust radius and render circle
    function dragDraw(){
        point2 = d3.mouse(this);
        circle.attr("r", getRadius(point1[0], point1[1], point2[0], point2[1]));
        console.log(circle);
    }

//    console.log(circle);
//    circle.call(d3.drag().on("drag", selectDrag)
//        .on("end", stopRendering));
    function selectDrag(){
        //get attributes of current circle
        var cX = this.getAttribute("cx"), cY = this.getAttribute("cy");
        console.log(cX);
        console.log(cY);
        var mousingX = d3.event.dx;
        var mousingY = d3.event.dy;
        d3.select(this).attr("r", getRadius(cX, cY, mousingX, mousingY));
    }

    function stopRendering(){

    }

</script>

</body>
</html>